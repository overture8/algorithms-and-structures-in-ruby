<!DOCTYPE html>

<html>
<head>
  <title>TicTacToe</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="tictactoe">TicTacToe</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">require</span> <span class="hljs-string">'set'</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicTacToe</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>initialize</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Why use Sets? <code>Sets</code> are particularly useful when
identifying if a user has a winning line. We don’t
need to worry about the order that they picked the
winning numbers - just use the built in <code>subset?</code>
method and we’re done. See the <code>winner?</code> method below.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-variable">@winning_sets</span> = [
      <span class="hljs-constant">Set</span>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">9</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>], 
      <span class="hljs-constant">Set</span>[<span class="hljs-number">7</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>]
    ]</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Create two users using the <code>Struct</code>, defined
below, and set the current user to user1.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-variable">@user1</span> = <span class="hljs-constant">User</span>.new(<span class="hljs-string">'User1'</span>)
    <span class="hljs-variable">@user2</span> = <span class="hljs-constant">User</span>.new(<span class="hljs-string">'User2'</span>)
    <span class="hljs-variable">@current_user</span> = <span class="hljs-variable">@user1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>The <code>play</code> method controls user input and
calls the required methods to keep track of
the users selections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    play
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>play
    <span class="hljs-keyword">until</span> winner?</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Get some input from the given user.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      print <span class="hljs-string">"<span class="hljs-subst">#{<span class="hljs-variable">@current_user</span>.name}</span>, choose a number from 1-9: "</span>
      input = gets.strip</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>First off, check if the input is valid then
record the position that the user has selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      mark_position(input) <span class="hljs-keyword">if</span> valid?(input)
    <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Once the we drop out of the loop above,
all that remains is to tell the users who
has won and exit.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    puts <span class="hljs-string">"The winner is, <span class="hljs-subst">#{winner?.name}</span>"</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>winner?</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Make use of the <code>Set#subset?</code> method to check if
a winning combination of numbers has been picked
bby either of the users. If so, return that user
otherwise nil will be returned.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-variable">@user1</span> <span class="hljs-keyword">if</span> <span class="hljs-variable">@winning_sets</span>.any? { |w| w.subset?(<span class="hljs-variable">@user1</span>.answers) }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">@user2</span> <span class="hljs-keyword">if</span> <span class="hljs-variable">@winning_sets</span>.any? { |w| w.subset?(<span class="hljs-variable">@user2</span>.answers) }
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>valid?(input)</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Make sure input is a number between 1-9</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> input.to_s.scan(<span class="hljs-regexp">/^\d$/</span>).none?
      puts <span class="hljs-string">"Provide a number between 1-9"</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span> 
    <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Make sure either user hasn’t already picked
the input</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> <span class="hljs-variable">@user1</span>.answers.one? { |n| n == input } || <span class="hljs-variable">@user2</span>.answers.one? { |n| n == input }
      puts <span class="hljs-string">"This number has already been picked"</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span> 
    <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>If we make it here, it’s valid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>mark_position(input)</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Add the supplied answer to the users <code>Set</code> and toggle
the other user to be the <code>@current_user</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-variable">@current_user</span>.answers.add(input.to_i)
    <span class="hljs-variable">@current_user</span> = <span class="hljs-variable">@current_user</span> == <span class="hljs-variable">@user1</span> ? <span class="hljs-variable">@user2</span> <span class="hljs-symbol">:</span> <span class="hljs-variable">@user1</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Define a basic <code>Struct</code> to hold the
user information.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">Struct</span></span>.<span class="hljs-title">new</span>(:<span class="hljs-title">name</span>, :<span class="hljs-title">answers</span>)</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>initialize(name)
    <span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.answers = name, <span class="hljs-constant">Set</span>[]
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
